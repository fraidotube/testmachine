/* =========================================================
   TestMachine ‚Äì stile base (blu + immagine/tinta)
   ========================================================= */
*{box-sizing:border-box}
html,body{margin:0;padding:0}

/* ---------------- Palette + variabili globali ---------------- */
:root{
  --bg-deep: #081a3a;          /* fallback di base */
  --bg-url: none;              /* nessuna immagine all'avvio (niente flash) */
  --bg-solid: var(--bg-deep);  /* tinta unita finch√© bg.js non imposta l'immagine */

  --text: #f5f7ff; 
  --muted: rgba(245,247,255,.84);

  --card: rgba(10,14,22,.94);      /* PI√ô OPACO (prima .88) */
  --card-border: rgba(255,255,255,.24);
  --shadow: 0 14px 40px rgba(0,0,0,.35);

  --btn: #1e40af;
  --btn-hover: #1b3a9a;
  --btn-2: #1f2937;
  --btn-2-hover: #111827;

  --danger: #dc2626;
  --ok: #22c55e;
  --warn: #f59e0b;
}

/* ---------------- Sfondo globale (vale per TUTTE le pagine) ---------------- */
html{
  min-height: 100%;
  background-image:
    linear-gradient(rgba(0,0,0,.35), rgba(0,0,0,.35)),
    var(--bg-url);                 /* immagine (o 'none' per tinta) */
  background-repeat: no-repeat, no-repeat;
  background-position: center, center;
  background-size: 100% 100%, cover;
  background-attachment: fixed, fixed;
  background-color: var(--bg-solid, var(--bg-deep)); /* tinta unita */
}

/* evita ‚Äústrisce‚Äù in fondo sulle pagine corte */
body{
  min-height: 100vh;
  background: transparent;        /* lo sfondo lo dipinge html */
  color: var(--text);
  font: 16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif;
  letter-spacing:.2px;
}

.container{max-width:1100px;margin:0 auto;padding:20px}
.text-strong{ font-weight:600; text-shadow:0 1px 2px rgba(0,0,0,.6); }

/* STATUS CARD - override forte */
.card--status{
  background: linear-gradient(180deg, rgba(6,10,18,.30), rgba(10,14,22,.92)) !important;
  border: 1px solid rgba(255,255,255,.22) !important;
  box-shadow: 0 14px 40px rgba(0,0,0,.35) !important;
  backdrop-filter: blur(12px) saturate(120%) !important;
}
.card--status h2,
.card--status b,
.card--status .muted,
.card--status .muted-small{
  text-shadow: 0 1px 2px rgba(0,0,0,.6);
}

.kpi{
  background: rgba(0,0,0,.28) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
}
.pill{
  background: rgba(255,255,255,.10) !important;
  border: 1px solid rgba(255,255,255,.16) !important;
}
.bar{ background: rgba(255,255,255,.18) !important; }


.card h2{ font-weight:700; }
.card h3{ font-weight:600; }


/* lampadina di stato */
.lamp{display:inline-block;width:12px;height:12px;border-radius:999px;background:#666;box-shadow:0 0 0 2px rgba(255,255,255,.08) inset, 0 0 6px rgba(0,0,0,.4)}
.lamp.green{background:#20c997;box-shadow:0 0 8px rgba(32,201,151,.7)}
.lamp.red{background:#ff5b5b;box-shadow:0 0 8px rgba(255,91,91,.7)}
.lamp.grey{background:#6c757d;box-shadow:0 0 8px rgba(108,117,125,.4)}




/* ---------------- NAV ---------------- */
.nav{display:flex;align-items:center;gap:16px;margin-bottom:16px}
.brand{display:flex;align-items:center;gap:10px}
.logo{width:128px;height:64px}
.title-center{flex:1;text-align:center;font-weight:800;font-size:2.55rem;letter-spacing:.6px}
.nav .spacer a{color:var(--text);opacity:.9;text-decoration:none}
.nav .spacer a:hover{text-decoration:underline}
@media (max-width:560px){.logo{width:44px;height:44px}.title-center{font-size:1.35rem}}

/* ---------------- Sezioni & griglia ---------------- */
.section-title{margin:6px 0 10px;font-size:1.1rem;opacity:.92}
.grid{display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}

/* ---------------- Card base ---------------- */
.card{
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius:16px;
  padding:14px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(8px) saturate(120%);
  position: relative;
}
.card h2{margin:0 0 6px;font-size:1.15rem}
.card h3{margin:6px 0 8px;font-size:1.05rem}
.card::after{
  content:""; position:absolute; inset:0; pointer-events:none; border-radius:16px;
  background: radial-gradient(120% 80% at 30% -20%, rgba(255,255,255,.04), transparent 60%);
}

/* ---------------- Testi ---------------- */
.muted{color:var(--muted)}
.muted-small{color:var(--muted);font-size:.95rem}

/* ---------------- Bottoni ---------------- */
.btn{
  display:inline-flex;align-items:center;justify-content:center;
  padding:9px 14px;border-radius:10px;background:var(--btn);color:#fff;text-decoration:none;
  border:1px solid rgba(255,255,255,.12);
  transition:transform .06s ease, filter .15s ease, background .15s ease;
  cursor:pointer;user-select:none; box-shadow: 0 6px 18px rgba(0,0,0,.25);
}
.btn:hover{filter:brightness(1.03);background:var(--btn-hover);transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn.secondary{background:var(--btn-2);color:#e6e6e6}
.btn.secondary:hover{background:var(--btn-2-hover)}
.btn.danger{background:var(--danger)}
.btn.danger:hover{filter:brightness(1.03)}

/* pulsanti centrati nelle tool/settings card */
.card--tool .btn,

.card--tool .btn:hover,.card--settings .btn:hover{
  background:var(--btn-2-hover); transform:translateY(-1px); filter:brightness(1.03);
}

/* SETTINGS CARDS: scure, opache e leggibili */
.card--settings{
  background: linear-gradient(180deg, rgba(8,12,20,.92), rgba(12,18,28,.92)) !important;
  border: 1px solid rgba(255,255,255,.18) !important;
  box-shadow: 0 14px 40px rgba(0,0,0,.35) !important;
  backdrop-filter: blur(10px) saturate(120%) !important;
}
.card--settings h2,
.card--settings p,
.card--settings .muted,
.card--settings .muted-small{
  text-shadow: 0 1px 2px rgba(0,0,0,.55);
}

/* pulsante nelle card Impostazioni: contrasto maggiore */
.card--settings .btn{
  background: var(--btn-2);
  border-color: rgba(255,255,255,.16);
  color: #f5f7ff;
}
.card--settings .btn:hover{
  background: var(--btn-2-hover);
  filter: brightness(1.03);
  transform: translateY(-1px);
}

/* accento leggero per tipo di tool */
.card--tool .btn{ transition: box-shadow .18s ease, filter .15s ease }
.card--smokeping .btn{ box-shadow: 0 6px 16px rgba(190,40,60,.14), inset 0 0 0 1px rgba(190,40,60,.18); }
.card--smokeping .btn:hover{ box-shadow: 0 8px 18px rgba(190,40,60,.20), inset 0 0 0 1px rgba(190,40,60,.22); }
.card--pcap .btn{ box-shadow: 0 6px 16px rgba(28,106,215,.14), inset 0 0 0 1px rgba(28,106,215,.18); }
.card--pcap .btn:hover{ box-shadow: 0 8px 18px rgba(28,106,215,.20), inset 0 0 0 1px rgba(28,106,215,.22); }
.card--speedtest .btn{ box-shadow: 0 6px 16px rgba(12,150,150,.14), inset 0 0 0 1px rgba(12,150,150,.18); }
.card--speedtest .btn:hover{ box-shadow: 0 8px 18px rgba(12,150,150,.20), inset 0 0 0 1px rgba(12,150,150,.22); }
.card--netmap .btn{ box-shadow: 0 6px 16px rgba(186,165,52,.14), inset 0 0 0 1px rgba(186,165,52,.18); }
.card--netmap .btn:hover{ box-shadow: 0 8px 18px rgba(186,165,52,.20), inset 0 0 0 1px rgba(186,165,52,.22); }
.card--voip .btn{ box-shadow: 0 6px 16px rgba(40,160,220,.14), inset 0 0 0 1px rgba(40,160,220,.18); }
.card--voip .btn:hover{ box-shadow: 0 8px 18px rgba(40,160,220,.20), inset 0 0 0 1px rgba(40,160,220,.22); }
.card--cacti .btn{ box-shadow: 0 6px 16px rgba(34,167,94,.14), inset 0 0 0 1px rgba(34,167,94,.18); }
.card--cacti .btn:hover{ box-shadow: 0 8px 18px rgba(34,167,94,.20), inset 0 0 0 1px rgba(34,167,94,.22); }
.card--flow .btn{ box-shadow: 0 6px 16px rgba(102,90,230,.14), inset 0 0 0 1px rgba(102,90,230,.18); }
.card--flow .btn:hover{ box-shadow: 0 8px 18px rgba(102,90,230,.20), inset 0 0 0 1px rgba(102,90,230,.22); }
.card--shell .btn{ box-shadow: 0 6px 16px rgba(120,130,145,.14), inset 0 0 0 1px rgba(120,130,145,.18); }
.card--shell .btn:hover{ box-shadow: 0 8px 18px rgba(120,130,145,.20), inset 0 0 0 1px rgba(120,130,145,.22); }
.card--alerts .btn{ box-shadow: 0 6px 16px rgba(180,60,165,.14), inset 0 0 0 1px rgba(180,60,165,.18); }
.card--alerts .btn:hover{ box-shadow: 0 8px 18px rgba(180,60,165,.20), inset 0 0 0 1px rgba(180,60,165,.22); }

/* ---------------- Form ---------------- */
label{display:block;margin:10px 0 6px;font-weight:600}
input,select,textarea{
  width:100%;padding:9px 10px;border-radius:10px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(1,1,1,.46);color:var(--text);
  outline:none;
}
input::placeholder,textarea::placeholder{color:rgba(255,255,255,.55)}
.row{display:grid;gap:12px;grid-template-columns:1fr 1fr}
@media (max-width:720px){.row{grid-template-columns:1fr}}

/* ---------------- Tabelle ---------------- */
.table{overflow-x:auto;-webkit-overflow-scrolling:touch}
.table table{width:100%;border-collapse:collapse;table-layout:auto}
.table th,.table td{white-space:nowrap;padding:8px 10px;border-bottom:1px dashed rgba(255,255,255,.07)}
.table thead th{position:sticky;top:0;background:rgba(255,255,255,.08);backdrop-filter:saturate(120%)}

/* ---------------- Footer ---------------- */
.footer{margin:26px 0 6px;opacity:.75;font-size:.95rem}

/* ---------------- Utility ---------------- */
.badge{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;font-size:.9rem;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.18)}
.badge.locked::before{content:"üîí";font-size:.95rem}
code,.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace}

/* ---------------- Status widget (home) ---------------- */
.status-grid{display:grid;gap:12px;grid-template-columns:1.1fr 1fr 1.2fr}
@media (max-width:1000px){.status-grid{grid-template-columns:1fr 1fr}}
@media (max-width:620px){.status-grid{grid-template-columns:1fr}}
.progress{height:8px;border-radius:999px;background:rgba(255,255,255,.10);overflow:hidden;margin-top:6px}
.progress .bar{height:100%;background:linear-gradient(90deg,#34d399,#10b981);width:0%}
.dot{width:9px;height:9px;border-radius:50%}
.ok{background:var(--ok)}.bad{background:var(--danger)}.warn{background:var(--warn)}

/* ---------------- PCAP elenco ---------------- */
.pcap-list{width:100%;display:flex;flex-direction:column;gap:10px}
.pcap-row{
  display:grid;grid-template-columns:1fr auto auto;gap:12px;align-items:center;
  padding:12px;border-radius:14px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.07)
}
.pcap-meta{min-width:0}
.pcap-name{color:#e9eefc}
.pcap-when{font-size:.92rem;opacity:.85}
.pcap-size{white-space:nowrap;justify-self:end;opacity:.95}
.pcap-actions{display:flex;gap:8px;flex-wrap:wrap;justify-self:end}
.inline-form{display:inline}
@media (max-width:1100px){.pcap-row{grid-template-columns:1fr auto}.pcap-actions{grid-column:1/-1;justify-self:start}}
@media (max-width:700px){.pcap-row{grid-template-columns:1fr}.pcap-size,.pcap-actions{justify-self:start}}

/* ---------------- Card brandizzate (armonizzate) ---------------- */
.card--smokeping{ background: linear-gradient(160deg, rgba(190, 40, 60, .30), rgba(190, 40, 60, .80)) !important; border-color: rgba(190, 40, 60, .42) !important; }
.card--pcap{      background: linear-gradient(160deg, rgba(28, 106, 215, .30), rgba(28, 106, 215, .80)) !important; border-color: rgba(28, 106, 215, .42) !important; }
.card--speedtest{ background: linear-gradient(160deg, rgba(12, 150, 150, .30), rgba(12, 150, 150, .80)) !important; border-color: rgba(12, 150, 150, .42) !important; }
.card--netmap{    background: linear-gradient(160deg, rgba(186, 165, 52, .30), rgba(186, 165, 52, .82)) !important; border-color: rgba(186, 165, 52, .42) !important; }
.card--voip{      background: linear-gradient(160deg, rgba(40, 160, 220, .30), rgba(40, 160, 220, .82)) !important; border-color: rgba(40, 160, 220, .42) !important; }
.card--cacti{     background: linear-gradient(160deg, rgba(34, 167, 94, .30), rgba(34, 167, 94, .82)) !important; border-color: rgba(34, 167, 94, .42) !important; }
.card--flow{      background: linear-gradient(160deg, rgba(102, 90, 230, .30), rgba(102, 90, 230, .82)) !important; border-color: rgba(102, 90, 230, .42) !important; }
.card--shell{     background: linear-gradient(160deg, rgba(90, 97, 110, .28), rgba(90, 97, 110, .82)) !important; border-color: rgba(120, 130, 145, .40) !important; }
.card--alerts{    background: linear-gradient(160deg, rgba(180, 60, 165, .30), rgba(180, 60, 165, .82)) !important; border-color: rgba(180, 60, 165, .42) !important; }
.card--nat{       background: linear-gradient(160deg, rgba(23,100,100,0.25), rgba(100,0,0,.80)) !important; border: 1px solid rgba(255,255,255,.35); !important; }
.card--graylog{   background: linear-gradient(160deg, rgba(123,00,100,0.25), rgba(100,150,0,.80)) !important; border: 1px solid rgba(255,255,255,.35); !important; }
.card--dhcpsentinel{   background: linear-gradient(160deg, rgba(50,50,100,0.25), rgba(0,150,50,.80)) !important; border: 1px solid rgba(255,255,255,.35); !important; }

/* ---------------- Servizi (home) ---------------- */
.hr-thin{
  border:0; height:1px; margin:8px -6px 6px;
  background: linear-gradient(90deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
}
.services-row{ display:flex; align-items:flex-start; gap:10px; flex-wrap:wrap; }
.services-title{ font-weight:700; opacity:.92; margin-top:2px; min-width:80px; }
.svc-inline{ display:flex; gap:6px; flex-wrap:wrap; align-items:center; flex:1; }
.svc-inline .pill{ background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); }

/* header card flex (niente ‚Äúfloat‚Äù) */
.card h2{ display:flex; align-items:center; gap:10px; }
.card h2 .right{ margin-left:auto; float:none; }

/* bottone ‚ÄúAggiorna‚Äù compatto */
.card--status h2 .btn{
  padding:6px 10px; font-size:.9rem; line-height:1.1; border-radius:8px; min-width:auto;
  background:var(--btn-2); border-color:rgba(255,255,255,.14); box-shadow:0 4px 12px rgba(0,0,0,.20);
}
.card--status h2 .btn:hover{ background:var(--btn-2-hover); transform:translateY(-1px); filter:brightness(1.03); }

/* ignora eventuali margin-top inline nelle tool card */
.grid .card.card--tool{ margin-top:0 !important; }

/* ---------------- Bg picker compatto ---------------- */
.bgpicker{ display:flex; align-items:center; gap:10px; margin:8px 0 24px; justify-content:flex-end; }
.bgpicker label{ white-space:nowrap; opacity:.9; }
.bgpicker .bgsel{ width:auto !important; min-width:160px; max-width:260px; display:inline-block !important; padding:8px 10px; border-radius:10px; }
